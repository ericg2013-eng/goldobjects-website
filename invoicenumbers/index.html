<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Invoice Numbers — Gold Objects, Inc.</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Raleway', 'Avenir', 'Helvetica Neue', sans-serif;
      background: #f5f5f7;
      color: #1d1d1f;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 3rem 1rem;
    }

    h1 {
      font-size: 1.4rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #1d1d1f;
      margin-bottom: 2.5rem;
    }

    .number-display {
      background: #fff;
      border-radius: 16px;
      padding: 2rem 2rem;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
      text-align: center;
      margin-bottom: 1.5rem;
      width: 100%;
      max-width: 520px;
    }

    .number {
      display: flex;
      justify-content: center;
      gap: 0.5em;
    }

    .digit-group {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
      font-size: 2.4rem;
      font-weight: 600;
      color: #1d1d1f;
      font-variant-numeric: tabular-nums;
      letter-spacing: 0.04em;
    }

    .buttons {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 2.5rem;
      width: 100%;
      max-width: 520px;
    }

    button {
      flex: 1;
      padding: 0.85rem 1.5rem;
      border: none;
      border-radius: 10px;
      font-family: inherit;
      font-size: 0.85rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      cursor: pointer;
      transition: all 0.2s;
      -webkit-tap-highlight-color: transparent;
    }

    .btn-generate {
      background: #1d1d1f;
      color: #fff;
    }

    .btn-generate:hover {
      background: #333;
    }

    .btn-generate:active {
      transform: scale(0.97);
    }

    .btn-copy, .btn-export {
      background: #e8e8ed;
      color: #1d1d1f;
    }

    .btn-copy:hover, .btn-export:hover {
      background: #d2d2d7;
    }

    .btn-copy:active, .btn-export:active {
      transform: scale(0.97);
    }

    .history-section {
      width: 100%;
      max-width: 520px;
    }

    .history-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 0.75rem;
    }

    .history-header h2 {
      font-size: 0.8rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: #86868b;
    }

    .history-header-left {
      display: flex;
      align-items: baseline;
      gap: 0.6rem;
    }

    .btn-reset {
      font-family: inherit;
      font-size: 0.65rem;
      font-weight: 500;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: #b0b0b5;
      background: none;
      border: 1px solid #d8d8dc;
      border-radius: 4px;
      padding: 0.15rem 0.45rem;
      cursor: pointer;
      flex: none;
      transition: all 0.2s;
    }

    .btn-reset:hover {
      color: #86868b;
      border-color: #b0b0b5;
    }

    .history-date {
      font-size: 0.75rem;
      font-weight: 400;
      color: #86868b;
    }

    .history-list {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
      overflow: hidden;
    }

    .history-empty {
      padding: 2rem;
      text-align: center;
      font-size: 0.9rem;
      color: #86868b;
    }

    .history-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.85rem 1.25rem;
      border-bottom: 1px solid #f0f0f2;
    }

    .history-item:last-child {
      border-bottom: none;
    }

    .history-number {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
      font-size: 0.95rem;
      font-weight: 500;
      letter-spacing: 0.04em;
      color: #1d1d1f;
      font-variant-numeric: tabular-nums;
    }

    .history-time {
      font-size: 0.75rem;
      color: #86868b;
    }

    @media (max-width: 480px) {
      body {
        padding: 2rem 0.75rem;
      }

      h1 {
        font-size: 1.15rem;
        margin-bottom: 2rem;
      }

      .number-display {
        padding: 1.75rem 1rem;
        border-radius: 14px;
      }

      .digit-group {
        font-size: 1.8rem;
      }

      button {
        padding: 0.9rem 1rem;
      }

      .history-item {
        padding: 0.75rem 1rem;
      }
    }
  </style>
</head>
<body>

  <h1>Invoice Numbers</h1>

  <div class="number-display">
    <div class="number" id="currentNumber">
      <span class="digit-group">----</span>
      <span class="digit-group">----</span>
      <span class="digit-group">----</span>
    </div>
  </div>

  <div class="buttons">
    <button class="btn-generate" id="generateBtn">Generate</button>
    <button class="btn-copy" id="copyBtn">Copy</button>
    <button class="btn-export" id="exportBtn">Export</button>
  </div>

  <div class="history-section">
    <div class="history-header">
      <div class="history-header-left">
        <h2>History</h2>
        <button class="btn-reset" id="resetBtn">Clear</button>
      </div>
      <span class="history-date" id="historyDate"></span>
    </div>
    <div class="history-list" id="historyList">
      <div class="history-empty">No numbers generated yet</div>
    </div>
  </div>

  <script>
    function getTodayKey() {
      var d = new Date();
      return d.getFullYear() + '-' + String(d.getMonth() + 1).padStart(2, '0') + '-' + String(d.getDate()).padStart(2, '0');
    }

    function formatDate() {
      return new Date().toLocaleDateString('en-US', {
        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
      });
    }

    function randomDigitNoZero() {
      return Math.floor(Math.random() * 9) + 1;
    }

    function generateNumber() {
      var digits = '';
      for (var i = 0; i < 12; i++) {
        digits += randomDigitNoZero();
      }
      return digits;
    }

    function setDisplayNumber(digits) {
      var el = document.getElementById('currentNumber');
      el.innerHTML = '<span class="digit-group">' + digits.slice(0, 4) + '</span>'
        + '<span class="digit-group">' + digits.slice(4, 8) + '</span>'
        + '<span class="digit-group">' + digits.slice(8, 12) + '</span>';
    }

    function setDisplayPlaceholder() {
      var el = document.getElementById('currentNumber');
      el.innerHTML = '<span class="digit-group">----</span>'
        + '<span class="digit-group">----</span>'
        + '<span class="digit-group">----</span>';
    }

    function formatForHistory(digits) {
      return digits.slice(0, 4) + ' ' + digits.slice(4, 8) + ' ' + digits.slice(8, 12);
    }

    function loadHistory() {
      var key = getTodayKey();
      var data = localStorage.getItem('invoiceHistory_' + key);
      return data ? JSON.parse(data) : [];
    }

    function saveHistory(data) {
      var key = getTodayKey();
      localStorage.setItem('invoiceHistory_' + key, JSON.stringify(data));
    }

    function formatTime(iso) {
      return new Date(iso).toLocaleTimeString('en-US', {
        hour: 'numeric', minute: '2-digit', second: '2-digit'
      });
    }

    function renderHistory(data) {
      var list = document.getElementById('historyList');
      if (data.length === 0) {
        list.innerHTML = '<div class="history-empty">No numbers generated yet</div>';
        return;
      }
      var html = '';
      for (var i = data.length - 1; i >= 0; i--) {
        html += '<div class="history-item">'
          + '<span class="history-number">' + formatForHistory(data[i].number) + '</span>'
          + '<span class="history-time">' + formatTime(data[i].time) + '</span>'
          + '</div>';
      }
      list.innerHTML = html;
    }

    function exportHistory() {
      var data = loadHistory();
      if (data.length === 0) return;
      var lines = ['Invoice Numbers — ' + formatDate(), ''];
      for (var i = 0; i < data.length; i++) {
        lines.push(data[i].number + '  ' + formatTime(data[i].time));
      }
      lines.push('', 'Total: ' + data.length + ' numbers');
      var text = lines.join('\n');
      var blob = new Blob([text], { type: 'text/plain' });
      var url = URL.createObjectURL(blob);
      var a = document.createElement('a');
      a.href = url;
      a.download = 'invoice-numbers-' + getTodayKey() + '.txt';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    // Initialize
    document.getElementById('historyDate').textContent = formatDate();
    var entries = loadHistory();
    renderHistory(entries);

    if (entries.length > 0) {
      setDisplayNumber(entries[entries.length - 1].number);
    }

    document.getElementById('generateBtn').addEventListener('click', function() {
      var num = generateNumber();
      setDisplayNumber(num);
      var entries = loadHistory();
      entries.push({ number: num, time: new Date().toISOString() });
      saveHistory(entries);
      renderHistory(entries);
    });

    document.getElementById('copyBtn').addEventListener('click', function() {
      var spans = document.getElementById('currentNumber').querySelectorAll('.digit-group');
      var text = '';
      for (var i = 0; i < spans.length; i++) text += spans[i].textContent;
      if (text.indexOf('-') !== -1) return;
      navigator.clipboard.writeText(text).then(function() {
        var btn = document.getElementById('copyBtn');
        btn.textContent = 'Copied';
        setTimeout(function() { btn.textContent = 'Copy'; }, 1500);
      });
    });

    document.getElementById('resetBtn').addEventListener('click', function() {
      localStorage.removeItem('invoiceHistory_' + getTodayKey());
      setDisplayPlaceholder();
      renderHistory([]);
    });

    document.getElementById('exportBtn').addEventListener('click', exportHistory);
  </script>

</body>
</html>
